# services.yaml
# NIST 800-53 SC-7: Boundary Protection
# All services are ClusterIP â€” no direct node exposure.
# External traffic enters only via Ingress controller (TLS terminated at edge).
# services.nodeports: "0" is enforced by resourcequota.yaml.
---
apiVersion: v1
kind: Service
metadata:
  name: novasec-api
  namespace: anthra
  labels:
    app: anthra-api
    control: SC-7
spec:
  type: ClusterIP
  selector:
    app: anthra-api
  ports:
    - name: http
      port: 8080
      targetPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: novasec-ui
  namespace: anthra
  labels:
    app: anthra-ui
    control: SC-7
spec:
  type: ClusterIP
  selector:
    app: anthra-ui
  ports:
    - name: http
      port: 80
      targetPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: novasec-log-ingest
  namespace: anthra
  labels:
    app: anthra-log-ingest
    control: SC-7
spec:
  type: ClusterIP
  selector:
    app: anthra-log-ingest
  ports:
    - name: http
      port: 9090
      targetPort: 9090
---
apiVersion: v1
kind: Service
metadata:
  name: novasec-db
  namespace: anthra
  labels:
    app: anthra-db
    control: SC-7
spec:
  type: ClusterIP
  selector:
    app: anthra-db
  ports:
    - name: postgres
      port: 5432
      targetPort: 5432
